# Market Risk Dashboard - 暴落予兆・リスク指標監視ダッシュボード

![Dashboard Status](https://img.shields.io/badge/status-active-success)
![Version](https://img.shields.io/badge/version-2.3.0-blue)
![License](https://img.shields.io/badge/license-MIT-green)

米国市場の主要なリスク指標をリアルタイムに近い形で監視し、過去20年の推移と比較できるWebダッシュボードです。TradingView風のプロフェッショナルなUIで、市場の暴落予兆を視覚的に把握できます。

## 🎯 プロジェクト概要

このダッシュボードは、以下の**8つ**の重要なリスク指標を監視します：

1. **VIX（恐怖指数）** - 市場のボラティリティを測定
2. **SKEW（テールリスク）** - 暴落リスクの予兆を検出
3. **Put/Call比率** - 市場センチメントの測定
4. **ハイイールド債スプレッド** - 信用リスクの拡大を検知
5. **Shiller P/E（CAPE）** - 株価の割高感を評価
6. **200日移動平均線乖離率** - トレンドの強さを分析
7. **Fear & Greed Index** - 市場感情を0-100のスコアで評価
8. **Buffett Indicator（バフェット指数）** - 株式時価総額/GDP比率で割高感を測定

## ✨ 主要機能

### 📊 実装済み機能（v2.3.0）

- ✅ **リアルタイム指標表示** - 8つの主要リスク指標の現在値を一目で確認
- ✅ **ステータス判定システム** - 安全/注意/警告の3段階で自動判定
- ✅ **インタラクティブチャート** - Chart.jsによる滑らかなグラフ表示（8指標すべて）
- ✅ **柔軟な期間切り替え機能** - **1週間/1ヶ月/6ヶ月/1年/5年/10年/20年**の7段階表示
- ✅ **クリック式詳細分析** - 各指標カードをクリックで詳細分析モーダル表示
- ✅ **市場データ × 世論の横断分析** - データとSNS/世論を統合分析
- ✅ **美しい車型センチメントゲージ** ⭐NEW - 完璧な半円形のメーター表示
- ✅ **動的センチメント計算** - 各指標に応じたリアルな感情スコア算出
- ✅ **過去の類似局面比較** - 歴史的データとの対比分析
- ✅ **AIライクな推奨アクション** - 状況に応じた具体的投資アドバイス
- ✅ **しきい値表示** - 各チャートに警戒ラインを赤線で表示
- ✅ **詳細テーブル表示** - 全指標の詳細情報を表形式で確認
- ✅ **アラートバナー** - 危険レベルの指標を自動検知して警告表示
- ✅ **総合評価セクション** - 市場リスクレベルと総合コメントを自動生成
- ✅ **リスクカウンター** - 警告/注意/安全の各指標数をリアルタイム表示
- ✅ **レスポンシブデザイン** - PC、タブレット、スマートフォンに完全対応
- ✅ **ダークモードUI** - 目に優しいプロフェッショナルなデザイン
- ✅ **データ更新機能** - ワンクリックでデータを最新化

### 🎨 SNS感情スコアメーター（v2.3.0 シンプル棒グラフ版）

**シンプルで分かりやすい棒グラフデザイン**
- **水平棒グラフ** - 0-100のスコアを横棒で直感的に表示
- **5色の自動カラーリング** - スコアに応じて色が変化
  - 0-25点: 赤（極度の恐怖）
  - 26-45点: オレンジ（恐怖）
  - 46-55点: グレー（中立）
  - 56-75点: 青（強欲）
  - 76-100点: 緑（極度の強欲）
- **滑らかなアニメーション** - 棒の伸びる動きがスムーズ
- **スコアと状態ラベルの同時表示** - 数値とテキストで一目瞭然
- **凡例付き** - 各スコア範囲の意味を明示

**スコアの意味**
- **0-25点**: 極度の恐怖（Extreme Fear）
- **26-45点**: 恐怖（Fear）
- **46-55点**: 中立（Neutral）
- **56-75点**: 強欲（Greed）
- **76-100点**: 極度の強欲（Extreme Greed）

**指標ごとの動的計算**
各指標の現在値に基づいて、リアルタイムで感情スコアを算出：
- VIX高騰 → 低スコア（恐怖）
- Put/Call比率低下 → 高スコア（強欲）
- Shiller P/E上昇 → 高スコア（バブル警戒）
- など、指標特性に応じた適切なスコアリング

### 📈 期間切り替え機能（7段階）

短期から長期まで、幅広い時間軸で市場動向を分析可能：

| 期間 | 用途 | 最適な分析 |
|------|------|----------|
| **1週間** ⭐NEW | 超短期トレーディング | デイトレ・スキャルピング |
| **1ヶ月** ⭐NEW | 短期トレンド確認 | スイングトレード |
| **6ヶ月** ⭐NEW | 中期トレンド分析 | ポジショントレード |
| **1年** | 年次トレンド | 年間パフォーマンス確認 |
| **5年** | 中長期トレンド | 景気サイクル分析 |
| **10年** | 長期トレンド | 構造的変化の把握 |
| **20年** | 超長期トレンド | 歴史的パターン分析 |

### 🎨 デザイン特徴

- TradingView風の洗練されたダークテーマ
- グリッドレイアウトによる効率的な情報配置
- ホバーエフェクトとアニメーション
- カラーコーディングによる直感的な状態表示（緑=安全、黄=注意、赤=警告）

## 📁 プロジェクト構造

```
market-risk-dashboard/
├── index.html              # メインHTMLファイル（モーダル・SVGゲージ含む）
├── .gitignore             # Git除外設定
├── LICENSE                # MITライセンス
├── css/
│   └── style.css          # スタイルシート（TradingView風デザイン）
├── js/
│   ├── data.js            # データ管理・サンプルデータ生成ロジック
│   ├── charts.js          # Chart.js設定とチャート管理
│   ├── analysis.js        # モーダル分析・横断分析・センチメント計算 ⭐NEW
│   └── main.js            # メインアプリケーションロジック
└── README.md              # プロジェクトドキュメント（このファイル）
```

### 主要ファイルの役割

- **index.html**: ダッシュボードのレイアウト、SVGセンチメントゲージ、モーダルウィンドウ構造
- **css/style.css**: TradingView風デザイン、レスポンシブレイアウト、アニメーション定義
- **js/data.js**: 8指標の定義、20年分の歴史データ生成、データ管理API
- **js/charts.js**: Chart.jsの設定、8つのチャート描画、期間切替ロジック
- **js/analysis.js**: モーダル詳細分析、横断分析コンテンツ、動的センチメント計算
- **js/main.js**: アプリ初期化、イベントハンドリング、UI更新ロジック

## 🚀 使用方法

### 基本的な使い方

1. **index.html** をブラウザで開く
2. ダッシュボードが自動的に読み込まれます
3. 各指標カードで現在のステータスを確認
4. **指標カードをクリック** → 詳細分析モーダルが開く ⭐NEW
5. グラフで過去の推移を視覚的に分析
6. **期間ボタン（7段階）で表示期間を変更**
   - **1週間** - 超短期の動き
   - **1ヶ月** - 短期トレンド
   - **6ヶ月** - 中期動向
   - **1年** - 年次パフォーマンス
   - **5年** - 中長期トレンド
   - **10年** - 長期パターン
   - **20年** - 歴史的視点
7. 更新ボタンでデータを最新化

### 各セクションの見方

#### 📈 リスク指標サマリー
- 8つのカードに各指標の現在値を表示
- ステータスバッジ（安全/注意/警告）で即座に状態を把握
- **カードをクリック → 詳細分析モーダルを表示** ⭐NEW

#### 🔍 詳細分析モーダル（v2.3.0）⭐NEW
各指標カードをクリックすると表示される、横断分析ウィンドウ：

**モーダルの構成**
1. **現在の市場データ**
   - 現在値、ステータス、しきい値
   - 1週間の変化率
   - 4つの主要データポイントをグリッド表示

2. **SNS感情スコア**（左側）
   - **美しい車型半円ゲージ** - 完璧な半円形状、5色グラデーション
   - **動的スコア計算** - 各指標の現在値から算出
   - **針のアニメーション** - イージング効果付き回転
   - **スコア範囲の凡例** - 0-25/26-45/46-55/56-75/76-100

3. **トレンドキーワード**（右側）
   - 指標に関連するSNS・メディアのキーワード

4. **市場データ × 世論の横断分析**
   - 市場データ側の分析
   - 世論・SNSトレンド分析
   - 統合的な投資判断

5. **過去の類似局面との比較**
   - 2008年金融危機
   - 2020年コロナショック
   - その他の歴史的イベント

6. **推奨アクション**
   - 現在の状況に応じた具体的な投資アドバイス
   - リスク管理のポイント

**閉じる方法**
- 上部/下部の「閉じる」ボタン
- ESCキー
- モーダル背景をクリック

#### 📋 詳細指標テーブル
- 各指標の説明、現在値、しきい値を一覧表示
- 色分けされた値で危険度を視覚化
- レスポンシブテーブルでモバイルでも見やすい

#### 📊 履歴チャート
- 各指標の過去20年間のデータをグラフ化
- 赤い点線がしきい値（警戒ライン）
- ホバーで詳細な数値とタイムスタンプを表示
- 期間ボタンで表示範囲を調整

## 🎛️ 指標の判定基準

| 指標 | 警告しきい値 | 判定基準 |
|------|-------------|---------|
| VIX | 30以上 | 市場の不安が高まっている状態 |
| SKEW | 145以上 | テールリスク（暴落）の可能性が高い |
| Put/Call比率 | 0.7以下 | 市場が過度に楽観的（危険信号） |
| HYスプレッド | 5.0%以上 | 信用リスクが拡大している |
| Shiller P/E | 30以上 | 株価が歴史的に割高な水準 |
| 200日線乖離率 | 0%以下 | 下落トレンドに転換している |
| **Fear & Greed** | **25以下** | **市場が極度の恐怖状態（暴落リスク）** ⭐NEW |
| **Buffett指数** | **150%以上** | **株式市場が過熱状態（バブルの可能性）** ⭐NEW |

## 📈 総合評価システム

ダッシュボードは全指標のステータスを分析し、市場リスクレベルを自動判定します：

### リスクレベル判定ロジック

- **極めて高い** 🔴 - 4つ以上の指標が警告レベル → 重大な市場リスク、防御的ポジション推奨
- **高い** 🔴 - 2〜3つの指標が警告レベル → リスク資産の削減を検討
- **やや高い** 🟡 - 1つの警告 or 3つ以上の注意 → 警戒が必要、ヘッジ戦略を検討
- **中程度** 🟡 - 1〜2つの注意指標 → 継続的なモニタリングが重要
- **低い** 🟢 - 全指標が良好 → 市場環境は比較的安定

### 総合コメント機能

リスクレベルに応じた具体的な行動提案を自動生成：
- ポートフォリオ調整の推奨
- リスク管理の具体的アドバイス
- 市場環境の総合的な解説

## 💾 データについて

### 現在の実装（オプションA）

- **データソース**: プログラムで生成したリアルな過去20年分のサンプルデータ
- **データ頻度**: 週次データ（約1,040データポイント）
- **危機イベント**: 2008年金融危機、2020年コロナショック、2022年調整局面を再現

### サンプルデータの特徴

- 実際の市場動向に基づいた変動パターン
- 主要な危機イベント時のスパイクを再現
- トレンドとボラティリティの組み合わせ
- リアルタイムAPI統合への移行が容易な設計

## 🔧 技術スタック

### フロントエンド
- **HTML5** - セマンティックマークアップ、SVGアニメーション
- **CSS3** - カスタムプロパティ、Grid、Flexbox、アニメーション
- **JavaScript (ES6+)** - モジュール化された設計、イベント駆動型

### ライブラリ・CDN
- **Chart.js 4.x** - インタラクティブなグラフ描画
- **chartjs-adapter-date-fns** - 日付軸の表示に必須
- **Font Awesome 6.x** - アイコンライブラリ
- **Google Fonts (Inter)** - モダンなタイポグラフィ

### デザイン技術（v2.3.0）
- **SVG Graphics** - 完璧な半円形センチメントゲージ
- **CSS Filters** - グローエフェクト（外側の光彩）
- **CSS Animations** - 針の回転、パルス効果
- **Cubic Bezier Easing** - 滑らかなアニメーション曲線
- **Transform Origin** - 針の回転軸を中心に配置
- **Linear Gradient** - 針のグラデーション効果
- **Drop Shadow** - 立体感のある影表現

### 設計パターン
- **モジュール分割** - data.js / charts.js / analysis.js / main.js
- **データレイヤー分離** - プレゼンテーションロジックとの明確な分離
- **イベント駆動型** - ユーザーインタラクションの効率的なハンドリング
- **レスポンシブファースト** - モバイルからデスクトップまで対応

## 🌐 ブラウザ互換性

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ✅ モバイルブラウザ（iOS Safari, Chrome Mobile）

## 📱 レスポンシブ対応

### デスクトップ（1024px以上）
- グリッドレイアウトでチャートを2列表示
- モーダル幅: 95vw（最大1400px）
- センチメント棒グラフ: フル幅表示
- 市場データグリッド: 4列

### タブレット（768px-1024px）
- 1列レイアウトに自動調整
- モーダル幅: 95vw
- センチメント棒グラフ: フル幅表示
- 市場データグリッド: 2列

### スマートフォン（768px未満）
- 縦スクロールで全機能にアクセス可能
- モーダル: 全画面表示（100vw × 100vh）
- センチメント棒グラフ: フル幅表示、文字サイズ最適化
- 市場データグリッド: 2列
- 期間ボタン: 横幅いっぱいに均等配置

## 🆕 バージョン2.3.0の新機能（2025年最新）

### 📊 シンプルな棒グラフ式センチメント表示 ⭐NEW

**直感的で分かりやすいデザインに変更**
- 水平棒グラフで0-100のスコアを一目で把握
- スコアに応じて自動的に色が変化（赤→オレンジ→グレー→青→緑）
- 滑らかなアニメーション効果で視覚的に魅力的
- スコア数値と状態ラベル（極度の恐怖/恐怖/中立/強欲/極度の強欲）を同時表示
- すべてのデバイスで快適に表示

**技術仕様**
```
表示形式: 水平棒グラフ
幅: 0-100%
高さ: 32px
アニメーション: width 1s ease
カラーマッピング:
  0-25: #f85149 (赤)
  26-45: #d29922 (オレンジ)
  46-55: #6e7681 (グレー)
  56-75: #58a6ff (青)
  76-100: #3fb950 (緑)
```

### 🔍 詳細分析モーダル（v2.2で実装、v2.3で最適化）

**各指標カードをクリック**すると、別ウィンドウ（モーダル）で深掘り分析を表示！

#### 表示される情報

1. **現在の市場データ**
   - 現在値、ステータス、しきい値
   - 過去1週間の変化率（%表示）

2. **世論・センチメント分析** 🔥
   - **SNS感情スコア**（0-100の棒グラフ表示）
   - **トレンドキーワード**（ハッシュタグ形式）
   - 投資家コミュニティの議論トレンド

3. **市場データ × 世論の横断分析** 🔥🔥
   - 数値データと世論の乖離・一致を分析
   - リスクレベルに応じた詳細解説
   - 著名投資家・アナリストの見解サマリー
   - SNS上の感情トレンド（恐怖/楽観）

4. **過去の類似局面との比較**
   - 2008年金融危機時との対比
   - 2020年コロナショック時との対比
   - 歴史的パターンからの示唆

5. **推奨アクション** 💡
   - リスクレベルに応じた具体的な投資戦略
   - ポートフォリオ調整の提案
   - リスク管理手法の推奨
   - エントリー/エグジット戦略

#### 操作方法

```
1. リスク指標サマリーの各カードをクリック
2. モーダルウィンドウが開く
3. 「閉じる」ボタン（上部・下部）で閉じる
4. ESCキーでも閉じられる
5. 背景のオーバーレイクリックでも閉じる
```

#### 対応指標

現在、以下の4つの主要指標に対応：
- ✅ **VIX（恐怖指数）** - 市場不安とボラティリティ分析
- ✅ **SKEW（テールリスク）** - 暴落リスク分析
- ✅ **Fear & Greed Index** - 市場感情の総合分析
- ✅ **Buffett Indicator** - バリュエーション分析

### UI/UX改善

- **ホバーエフェクト**: カードをマウスオーバーすると「詳細分析 >」が表示
- **スムーズアニメーション**: モーダルの開閉がフェード＆スライドで滑らか
- **レスポンシブモーダル**: スマホでも見やすい全画面表示
- **スクロール対応**: 長いコンテンツも快適に閲覧可能

## 🆕 バージョン2.1の機能

### 期間選択の大幅拡張 ⭐NEW
**短期トレーダー向けの時間軸を追加！**

1. **1週間表示** - 超短期の市場変動をキャッチ
   - デイトレーダー・スキャルパー向け
   - 日次の細かな変動を確認
   - 急激な市場変動の検知に最適

2. **1ヶ月表示** - 直近の市場トレンドを把握
   - スイングトレーダー向け
   - 週次トレンドの確認
   - 短期的な方向性の判断

3. **6ヶ月表示** - 中期トレンドの分析
   - ポジショントレーダー向け
   - 四半期パターンの確認
   - 中期的な投資判断のサポート

### チャート表示の最適化
- **時間軸の自動調整** - 期間に応じて日次/週次/月次/年次を自動選択
- **ラベル表示の最適化** - 短期間では日付を傾けて見やすく表示
- **データ密度の調整** - 各期間に最適なデータポイント数を表示

## 🆕 バージョン2.0の機能

### 追加された指標
1. **Fear & Greed Index** - CNN Moneyが提供する市場感情指標
   - 0-100のスコアで市場心理を数値化
   - 25以下で「極度の恐怖」を示し、逆張りの買いシグナル
   - 75以上で「極度の強欲」を示し、調整リスクが高い

2. **Buffett Indicator** - ウォーレン・バフェット推奨の割高指標
   - 株式市場の時価総額をGDPで割った比率
   - 100%以上で割高、150%以上で警告
   - 歴史的に市場暴落前に高い水準を示す

### 総合評価システム
- **リスクレベル自動判定** - 極めて高い/高い/やや高い/中程度/低い
- **指標カウンター** - 警告/注意/安全の各指標数を表示
- **AIライクな総合コメント** - 市場状況の解説と具体的な行動提案

### UI/UX改善
- 8指標対応のグリッドレイアウト最適化
- 総合評価セクションの追加
- ビジュアルリスクインジケーター

## 🔮 将来の拡張機能（未実装）

### データ統合
- [ ] リアルタイムAPI統合（Alpha Vantage, FRED等）
- [ ] 自動データ更新機能（定期ポーリング）
- [ ] ユーザーカスタムしきい値設定
- [ ] 履歴データのエクスポート機能

### 機能拡張
- [ ] 追加指標の実装（TED Spread、MOVE Index等）
- [ ] アラート通知機能（メール、プッシュ通知）
- [ ] データエクスポート機能（CSV、PDF）
- [ ] 複数指標の相関分析ビュー
- [ ] カスタムダッシュボード作成機能
- [ ] AIによる市場予測コメント

### UI/UX改善
- [ ] ライトモード切り替え
- [ ] カスタマイズ可能なレイアウト
- [ ] ドラッグ&ドロップでの並び替え
- [ ] 全画面モード
- [ ] 複数タイムゾーン対応
- [ ] 比較モード（過去の危機時との比較）

## 🛠️ カスタマイズガイド

### しきい値の変更

`js/data.js`の`indicators`オブジェクトで各指標のしきい値を変更できます：

```javascript
vix: {
    threshold: 30,  // この値を変更
    thresholdType: 'above'
}
```

### 新しい指標の追加

1. `js/data.js`に新しい指標定義を追加
2. `index.html`にカードとチャート要素を追加
3. `js/charts.js`と`js/main.js`で新指標を処理

### カラーテーマの変更

`css/style.css`の`:root`セクションでカラー変数を編集：

```css
:root {
    --bg-primary: #0d1117;    /* メイン背景色 */
    --color-blue: #58a6ff;    /* アクセントカラー */
    /* ... */
}
```

## 🔐 セキュリティとプライバシー

- ✅ クライアントサイドのみで動作（サーバー不要）
- ✅ 個人データの収集なし
- ✅ 外部への通信なし（CDNライブラリを除く）
- ✅ ローカル実行可能

## 📄 ライセンス

MIT License - 自由に使用、改変、配布できます

## 🙏 謝辞

- Chart.js チーム - 優れたチャートライブラリ
- Font Awesome - 豊富なアイコンセット
- TradingView - デザインインスピレーション

## 📞 サポート

問題や質問がある場合は、GitHubのIssuesセクションで報告してください。

---

**注意**: このダッシュボードはサンプルデータを使用しており、実際の投資判断には使用しないでください。リアルタイムデータを使用する場合は、信頼できるデータソースと統合してください。

**Last Updated**: 2025-12-30  
**Version**: 2.3.0  
**Status**: Production Ready (Demo Mode with Beautiful Sentiment Gauge)

## 📝 更新履歴

### Version 2.3.0 (2025-12-30) ⭐NEW - シンプル棒グラフ版 📊
- ✨ **SNS感情スコアをシンプルな棒グラフに変更**
  - 水平棒グラフで直感的に表示
  - スコアに応じた5色の自動カラーリング
  - 滑らかなアニメーション効果
  - スコアと状態ラベルを同時表示
- 🔧 **UI/UX改善**
  - より分かりやすいビジュアル表現
  - レスポンシブ対応
  - アニメーション最適化
- 📱 **モバイル最適化**
  - スコア文字サイズの調整
  - ラベル表示の最適化

### Version 2.2.0 (2025-12-29) - 横断分析機能実装 🔍
- ✨ **クリック式詳細分析モーダル**: 各指標カードをクリックで深掘り分析
- 🔥 **市場データ × 世論の横断分析**: データとSNS世論を統合的に分析
- 📊 **センチメント分析機能**: SNS感情スコアとトレンドキーワード表示
- 📜 **過去の類似局面比較**: 2008年金融危機、2020年コロナショック等との対比
- 💡 **AIライクな推奨アクション**: 状況別の具体的投資戦略提示
- 🎨 **モーダルUI実装**: 上下に「閉じる」ボタン配置、ESCキー対応
- ⚡ **スムーズアニメーション**: フェード＆スライドエフェクト
- 📱 **レスポンシブモーダル**: 全デバイスで快適な閲覧体験

### Version 2.1.0 (2025-12-29)
- ✨ **短期表示期間の追加**: 1週間、1ヶ月、6ヶ月を追加（計7段階）
- 🔧 データ取得ロジックを短期間対応に改善
- 📊 チャート時間軸を期間に応じて自動最適化（日次/週次/月次/年次）
- 🎨 短期間表示時のラベル表示を見やすく調整
- 📱 全期間でレスポンシブ表示に完全対応

### Version 2.0.0 (2025-12-29)
- ✨ Fear & Greed Index追加
- ✨ Buffett Indicator追加
- ✨ 総合評価セクション実装
- ✨ リスクレベル自動判定機能
- ✨ 総合コメント自動生成
- 🐛 Chart.js日付アダプター問題修正（グラフ表示バグ解消）
- 🎨 8指標対応のUIレイアウト最適化

### Version 1.0.0 (2025-12-28)
- 🎉 初回リリース
- 📊 6つの主要指標実装
- 📈 20年分の履歴データ生成
- 🎨 TradingView風ダークモードUI
